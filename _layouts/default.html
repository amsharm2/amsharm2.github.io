<!DOCTYPE html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% seo %}
  <link rel="stylesheet" href="{{ "assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  {% include head-custom.html %}
</head>

<body>
  <div class="wrapper">
    <header style="display: flex; align-items: flex-start; min-height: 220px;">
      <div id="sidebar-header-container">
        <div class="badge-base LI-profile-badge" data-locale="en_US" data-size="medium" data-theme="light" data-type="VERTICAL" data-vanity="amsharm2" data-version="v1">
          <a class="badge-base__link LI-simple-link" href="https://in.linkedin.com/in/amsharm2?trk=profile-badge"></a>
        </div>

        <hr style="border: none; border-top: 1px solid #fefbfb; margin: 16px 0; width: 100%; max-width: inherit; box-sizing: border-box;">

        <!-- Collapsible Sidebar menu for projects -->
        <nav id="sidebar-menu">
          <div class="nav-home" style="margin-bottom:10px;"><a href="{{ '/' | relative_url }}"><h2>Home</h2></a></div>
          <h2>Projects</h2>
          <ul>
            <li class="company-section">
              <span class="company-toggle" style="cursor:pointer; font-weight:bold; margin-right:8px;">[+]</span><span class="company-title">Greenlight</span>
              <ul class="company-projects" style="list-style: disc; margin-left: 20px; display: none;">
                <li><a href="{{ '/projects/greenlight/project-1.html' | relative_url }}">Project 1</a></li>
                <!-- <li><a href="{{ '/projects/greenlight/project-2.html' | relative_url }}">Project 2</a></li> -->
                <!-- <li><a href="{{ '/projects/greenlight/project-3.html' | relative_url }}">Project 3</a></li> -->
              </ul>
            </li>
            <li class="company-section">
              <span class="company-toggle" style="cursor:pointer; font-weight:bold; margin-right:8px;">[+]</span><span class="company-title">Blinkit</span>
              <ul class="company-projects" style="list-style: disc; margin-left: 20px; display: none;">
                <li><a href="{{ '/projects/blinkit/project-1.html' | relative_url }}">Project 1</a></li>
                <li><a href="{{ '/projects/blinkit/project-2.html' | relative_url }}">Project 2</a></li>
                <li><a href="{{ '/projects/blinkit/project-3.html' | relative_url }}">Project 3</a></li>
              </ul>
            </li>
            <li class="company-section">
              <span class="company-toggle" style="cursor:pointer; font-weight:bold; margin-right:8px;">[+]</span><span class="company-title">Cisco Systems</span>
              <ul class="company-projects" style="list-style: disc; margin-left: 20px; display: none;">
                <li><a href="{{ '/projects/cisco/project-1.html' | relative_url }}">Project 1</a></li>
                <li><a href="{{ '/projects/cisco/project-2.html' | relative_url }}">Project 2</a></li>
                <li><a href="{{ '/projects/cisco/project-3.html' | relative_url }}">Project 3</a></li>
              </ul>
            </li>
            <li class="company-section">
              <span class="company-toggle" style="cursor:pointer; font-weight:bold; margin-right:8px;">[+]</span><span class="company-title">Infy & Infogain</span>
              <ul class="company-projects" style="list-style: disc; margin-left: 20px; display: none;">
                <li><a href="#">Project 1</a></li>
                <li><a href="#">Project 2</a></li>
                <li><a href="#">Project 3</a></li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
      <div style="margin-left: 30px; flex: 1;">
        <!-- <h1><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>
         <h1><a href="{{ "/" | absolute_url }}">Amit Sharma</a></h1> -->

        <!-- {% if site.logo %}
          <img src="{{site.logo | relative_url}}" alt="Logo" />
        {% endif %} -->

        <!-- <p>{{ site.description | default: site.github.project_tagline }}</p> -->
        <!-- 
        {% if site.github.is_project_page %}
        <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{ site.github.repository_nwo }}</small></a></p>
        {% endif %} -->

        <!-- {% if site.show_downloads %}
        <ul class="downloads">
          <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
          <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
          <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
        </ul>
        {% endif %} -->

      </div>
    </header>
    <section id="main-content">
      {{ content }}

    </section>
    <!-- <footer id="site-footer">
      <p><small>Hosted on GitHub Pages</small></p>
    </footer> -->
  </div>
  </div>
  <script src="{{ "assets/js/scale.fix.js" | relative_url }}"></script>
  <script src="https://platform.linkedin.com/badges/js/profile.js" async defer type="text/javascript"></script>
  <script>
    // Helper: initialize sidebar toggles
    function initSidebarToggles() {
      var companySections = document.querySelectorAll('#sidebar-menu .company-section');
      companySections.forEach(function(section) {
        var toggle = section.querySelector('.company-toggle');
        var content = section.querySelector('.company-projects');
        // ensure default state
        if (!content) return;
        if (!content.style.display) content.style.display = 'none';
        toggle.onclick = function(e) {
          if (content.style.display === 'none') {
            content.style.display = 'block';
            toggle.textContent = '[-]';
          } else {
            content.style.display = 'none';
            toggle.textContent = '[+]';
          }
        };
      });
    }

    // Helper: execute inline scripts found in fetched fragment
    function runInlineScripts(container) {
      var scripts = container.querySelectorAll('script');
      scripts.forEach(function(oldScript) {
        var script = document.createElement('script');
        if (oldScript.src) {
          // External script: load by adding src
          script.src = oldScript.src;
        } else {
          script.textContent = oldScript.textContent;
        }
        document.body.appendChild(script).parentNode.removeChild(script);
      });
    }

    // Load a page fragment and replace #main-content with the fetched page's <section>
    function loadFragment(url, pushState = true) {
      // Normalize URL to same-origin absolute
      try {
        var absolute = new URL(url, location.href).href;
      } catch (e) {
        // If URL is malformed, fallback to full navigation
        window.location.href = url;
        return;
      }

      fetch(absolute, { headers: { 'X-Requested-With': 'XMLHttpRequest' } })
        .then(function(response) {
          if (!response.ok) throw new Error('Network response not ok');
          return response.text();
        })
        .then(function(htmlText) {
          var parser = new DOMParser();
          var doc = parser.parseFromString(htmlText, 'text/html');
          var newSection = doc.querySelector('section');
          if (!newSection) {
            // no fragment found, fallback to full navigation
            window.location.href = absolute;
            return;
          }

          var main = document.getElementById('main-content');
          if (!main) {
            window.location.href = absolute; // should not happen
            return;
          }

          // Replace content
          main.innerHTML = newSection.innerHTML;

          // Update document title (prefer <title>, fallback to first h1)
          var newTitle = doc.querySelector('title');
          if (newTitle && newTitle.textContent) {
            document.title = newTitle.textContent;
          } else {
            var h1 = main.querySelector('h1');
            if (h1) document.title = h1.textContent + ' â€” ' + (document.title || '');
          }

          // Run inline scripts inside the fetched section (if any)
          runInlineScripts(main);

          // Re-initialize any bindings inside page (if needed)
          // For now, re-run sidebar toggles so toggles remain functional
          initSidebarToggles();

          // Update browser URL (pushState)
          if (pushState) history.pushState({ url: absolute }, '', absolute);
        })
        .catch(function() {
          // on error, fall back to full navigation
          window.location.href = absolute;
        });
    }

    // Intercept clicks on sidebar project links to load only the content fragment
    function initAjaxNav() {
      var sidebar = document.getElementById('sidebar-menu');
      if (!sidebar) return;
      sidebar.addEventListener('click', function(e) {
        var target = e.target;
        // Walk up to <a> if click on child
        while (target && target !== sidebar && target.nodeName !== 'A') target = target.parentNode;
        if (!target || target.nodeName !== 'A') return;

        // Only intercept same-origin, same-site links
        var href = target.getAttribute('href');
        if (!href) return;
        // Allow anchors and external links normally
        if (href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('tel:')) return;
        var dest;
        try {
          dest = new URL(href, location.href);
        } catch (err) {
          return; // malformed
        }
        if (dest.origin !== location.origin) return; // external

        // Intercept
        e.preventDefault();
        loadFragment(dest.href, true);
      });
    }

    // Handle back/forward
    window.addEventListener('popstate', function(event) {
      var url = (event.state && event.state.url) ? event.state.url : location.href;
      loadFragment(url, false);
    });

    // Initialize on DOM ready
    document.addEventListener('DOMContentLoaded', function() {
      initSidebarToggles();
      initAjaxNav();
    });
  </script>
</body>

</html>